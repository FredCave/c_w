var Videos={player:"",loadPlayer:function(){console.log("loadPlayer");var a=$("#intro_video").find(".video_id").text();this.player=new YT.Player("intro_player",{height:"390",width:"640",videoId:a,events:{onReady:Videos.onPlayerReady,onStateChange:Videos.onPlayerStateChange}})},onPlayerReady:function(){console.log("onPlayerReady"),this.player.playVideo()},onPlayerStateChange:function(a){console.log("onPlayerStateChange"),0===a.data&&Videos.videoEnded()},videoEnded:function(){console.log("videoEnded"),$("#intro_video").fadeOut(1e3),$("#compass").fadeIn(1e3)}},Compass={init:function(){console.log("Compass.init"),this.bindEvents()},bindEvents:function(){console.log("Compass.bindEvents"),$("#compass a").on("click",function(a){a.preventDefault(),Compass.linkClick($(this))}),$("#end_link").on("click",function(){Compass.linkClick("end_link")})},getAngle:function(a){console.log("Compass.getAngle");var b=a.parents("li"),c=b.css("-webkit-transform")||b.css("-moz-transform")||b.css("-ms-transform")||b.css("-o-transform")||b.css("transform")||"FAIL",d=c.split("(")[1].split(")")[0].split(","),e=d[0],f=d[1],g=(d[2],d[3],Math.sqrt(e*e+f*f),Math.round(Math.atan2(f,e)*(180/Math.PI)));return g},linkClick:function(a){if(console.log("Compass.linkClick"),"end_link"!==a){var b=this.getAngle(a);$("#needle").css("transform","rotate("+b+"deg)");var c=a.attr("id")}else var c="7";if($(".popup").length){if($(".popup").attr("data-id")===c)return;console.log("Empty"),$(".popup").remove()}else setTimeout(function(){$("#popup_close").show()},1e3);$("#popup_wrapper").append("<div class='popup' data-id='"+c+"'></div>"),Popup.loadContent(c),setTimeout(function(){$(".popup").show()},1e3)}},Popup={popupPlayer:"",init:function(){console.log("Popup.init"),this.bindEvents()},bindEvents:function(){console.log("Popup.bindEvents"),$("#popup_close").on("click",function(){Popup.popupClose()})},popupClose:function(){console.log("Popup.popupClose"),$(".popup").remove(),$("#popup_close").hide()},loadContent:function(a){if(console.log("Popup.loadContent",a),$("#"+a).siblings(".video_id").length||"7"===a){if("7"===a)var b=$("#end_link").find(".video_id").text();else var b=$("#"+a).siblings(".video_id").text();this.loadVideo(b),$(".popup").addClass("popup_video")}else if("29"==a||"23"===a||"21"===a){var c=$("#"+a).html();console.log(217,c),$(".popup").html(c),"21"===a&&$(".popup").addClass("popup_chat")}else"27"===a&&(console.log("FAQ"),this.loadFAQ())},loadFAQ:function(){console.log("Popup.loadFAQ"),this.getQuestion("A"),$("#popup_wrapper").on("click",".answer",function(){console.log("Answer click.");var a=$(".question").attr("data-code")+$(this).attr("data-code");console.log(238,a),Popup.getQuestion(a)})},getQuestion:function(a){console.log("Popup.getQuestion",a),$("#27").find("[data-code="+a+"]").length&&(nextQuestion=$("#27").find("[data-code="+a+"]").text(),$(".popup").empty().append("<div data-code='"+a+"' class='question'>"+nextQuestion+"</div>"),$(".popup").append("<div class='answer' data-code='A'>Oui</div><div class='answer' data-code='B'>Non</div>"))},loadVideo:function(a){console.log("Popup.loadVideo"),$(".popup").append("<div id='popup_player'>"+a+"</div>"),this.player=new YT.Player("popup_player",{height:"390",width:"640",videoId:a,events:{onReady:Popup.onPlayerReady,onStateChange:Popup.onPlayerStateChange}})},onPlayerReady:function(){console.log("Popup.onPlayerReady"),Popup.player.playVideo()},onPlayerStateChange:function(a){console.log("Popup.onPlayerStateChange"),0===a.data&&Popup.popupClose()}};$(document).on("ready",function(){console.log("Ready");var a=document.createElement("script");a.src="https://www.youtube.com/iframe_api";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b),window.onYouTubeIframeAPIReady=Videos.loadPlayer,Compass.init(),Popup.init()});